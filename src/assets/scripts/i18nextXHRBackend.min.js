!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.i18nextXHRBackend=n()}(this,function(){"use strict";function t(t){return i.call(a.call(arguments,1),function(n){if(n)for(var o in n)void 0===t[o]&&(t[o]=n[o])}),t}function n(t,n,o,e,i){if(e&&"object"===("undefined"==typeof e?"undefined":r(e))){var a="",s=encodeURIComponent;for(var l in e)a+="&"+s(l)+"="+s(e[l]);e=a.slice(1)+(i?"":"&_t="+new Date)}try{var c=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");c.open(e?"POST":"GET",t,1),n.crossDomain||c.setRequestHeader("X-Requested-With","XMLHttpRequest"),e&&c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){c.readyState>3&&o&&o(c.responseText,c)},c.send(e)}catch(t){window.console&&console.log(t)}}function o(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:n}}var e=[],i=e.forEach,a=e.slice,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},l=function(){function t(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,o,e){return o&&t(n.prototype,o),e&&t(n,e),n}}(),c=function(){function n(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];s(this,n),this.init(t,o),this.type="backend"}return l(n,[{key:"init",value:function(n){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=n,this.options=t(e,this.options||{},o())}},{key:"readMulti",value:function(t,n,o){var e=this.options.loadPath;"function"==typeof this.options.loadPath&&(e=this.options.loadPath(t,n));var i=this.services.interpolator.interpolate(e,{lng:t.join("+"),ns:n.join("+")});this.loadUrl(i,o)}},{key:"read",value:function(t,n,o){var e=this.options.loadPath;"function"==typeof this.options.loadPath&&(e=this.options.loadPath([t],[n]));var i=this.services.interpolator.interpolate(e,{lng:t,ns:n});this.loadUrl(i,o)}},{key:"loadUrl",value:function(t,n){var o=this;this.options.ajax(t,this.options,function(e,i){if(i.status>=500&&i.status<600)return n("failed loading "+t,!0);if(i.status>=400&&i.status<500)return n("failed loading "+t,!1);var a=void 0,r=void 0;try{a=o.options.parse(e,t)}catch(n){r="failed parsing "+t+" to json"}return r?n(r,!1):void n(null,a)})}},{key:"create",value:function(t,n,o,e){var i=this;"string"==typeof t&&(t=[t]);var a={};a[o]=e||"",t.forEach(function(t){var o=i.services.interpolator.interpolate(i.options.addPath,{lng:t,ns:n});i.options.ajax(o,i.options,function(t,n){},a)})}}]),n}();return c.type="backend",c});